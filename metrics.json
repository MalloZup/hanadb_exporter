{
  "SELECT host, ROUND(SUM(memory_size_in_total)/1024/1024) column_tables_used_mb FROM sys.m_cs_tables GROUP BY host;":
  [{
    "name": "hanadb_column_tables_used_memory",
    "description": "Column tables total memory used in MB",
    "labels": ["HOST"],
    "value": "COLUMN_TABLES_USED_MB",
    "unit": "mb",
    "type": "gauge"
  }],
  "SELECT host, schema_name, ROUND(SUM(memory_size_in_total)/1024/1024) schema_memory_used_mb FROM sys.m_cs_tables GROUP BY host, schema_name;":
  [{
    "name": "hanadb_schema_used_memory",
    "description": "Total used memory by schema in MB",
    "labels": ["HOST", "SCHEMA_NAME"],
    "value": "SCHEMA_MEMORY_USED_MB",
    "unit": "mb",
    "type": "gauge"
  }],
  "SELECT MAX(TIMESTAMP) TIMESTAMP, HOST, MEASURED_ELEMENT_NAME CORE, SUM(MAP(CAPTION, 'User Time', TO_NUMBER(VALUE), 0)) USER_PCT, SUM(MAP(CAPTION, 'System Time', TO_NUMBER(VALUE), 0)) SYSTEM_PCT, SUM(MAP(CAPTION, 'Wait Time', TO_NUMBER(VALUE), 0)) WAITIO_PCT, SUM(MAP(CAPTION, 'Idle Time', 0, TO_NUMBER(VALUE))) BUSY_PCT, SUM(MAP(CAPTION, 'Idle Time', TO_NUMBER(VALUE), 0)) IDLE_PCT FROM sys.M_HOST_AGENT_METRICS WHERE MEASURED_ELEMENT_TYPE = 'Processor' GROUP BY HOST, MEASURED_ELEMENT_NAME;":
  [
    {
      "name": "hanadb_cpu_user",
      "description": "Percentage of CPU time spent by HANA DB in user space, over the last minute (in seconds)",
      "labels": ["HOST", "CORE"],
      "value": "USER_PCT",
      "unit": "percent",
      "type": "gauge"
    },
    {
      "name": "hanadb_cpu_system",
      "description": "Percentage of CPU time spent by HANA DB in Kernel space, over the last minute (in seconds)",
      "labels": ["HOST", "CORE"],
      "value": "SYSTEM_PCT",
      "unit": "percent",
      "type": "gauge"
    },
    {
      "name": "hanadb_cpu_waitio",
      "description": "Percentage of CPU time spent by HANA DB in IO mode, over the last minute (in seconds)",
      "labels": ["HOST", "CORE"],
      "value": "WAITIO_PCT",
      "unit": "percent",
      "type": "gauge"
    },
    {
      "name": "hanadb_cpu_busy",
      "description": "Percentage of CPU time spent by HANA DB, over the last minute (in seconds)",
      "labels": ["HOST", "CORE"],
      "value": "BUSY_PCT",
      "unit": "percent",
      "type": "gauge"
    },
    {
      "name": "hanadb_cpu_idle",
      "description": "Percentage of CPU time not spent by HANA DB, over the last minute (in seconds)",
      "labels": ["HOST", "CORE"],
      "value": "IDLE_PCT",
      "unit": "percent",
      "type": "gauge"
    }
  ],
  "SELECT MAX(timestamp) timestamp, host, measured_element_name interface, MAX(MAP(caption, 'Collision Rate', TO_NUMBER(value), 0)) coll_per_s, MAX(MAP(caption, 'Receive Rate', TO_NUMBER(value), 0)) recv_kb_per_s, MAX(MAP(caption, 'Transmit Rate', TO_NUMBER(value), 0)) trans_kb_per_s,MAX(MAP(caption, 'Packet Receive Rate', TO_NUMBER(value), 0)) recv_pack_per_s, MAX(MAP(caption, 'Packet Transmit Rate', TO_NUMBER(value), 0)) trans_pack_per_s, MAX(MAP(caption, 'Receive Error Rate', TO_NUMBER(value), 0)) recv_err_per_s, MAX(MAP(caption, 'Transmit Error Rate', TO_NUMBER(value), 0)) trans_err_per_s FROM sys.m_host_agent_metrics WHERE measured_element_type = 'NetworkPort' GROUP BY host, measured_element_name;":
  [
    {
      "name": "hanadb_network_collisions_per",
      "description": "Network collisions per second",
      "labels": ["HOST", "INTERFACE"],
      "value": "COLL_PER_S",
      "unit": "seconds",
      "type": "gauge"
    },
    {
      "name": "hanadb_network_receive_rate_kb_per",
      "description": "Network received rate in kilobytes per seconds",
      "labels": ["HOST", "INTERFACE"],
      "value": "RECV_KB_PER_S",
      "unit": "seconds",
      "type": "gauge"
    },
    {
      "name": "hanadb_network_transmission_rate_kb_per",
      "description": "Network transmission rate in kilobytes per seconds",
      "labels": ["HOST", "INTERFACE"],
      "value": "TRANS_KB_PER_S",
      "unit": "seconds",
      "type": "gauge"
    },
    {
      "name": "hanadb_network_receive_requests_per",
      "description": "Network receive rate in requests (packets) per seconds",
      "labels": ["HOST", "INTERFACE"],
      "value": "RECV_PACK_PER_S",
      "unit": "seconds",
      "type": "gauge"
    },
    {
      "name": "hanadb_network_transmission_rate_requests_per",
      "description": "Network transmission rate in requests (packets) per seconds",
      "labels": ["HOST", "INTERFACE"],
      "value": "TRANS_PACK_PER_S",
      "unit": "seconds",
      "type": "gauge"
    },
    {
      "name": "hanadb_network_receive_rate_errors_per",
      "description": "Network receive rate of errors per seconds",
      "labels": ["HOST", "INTERFACE"],
      "value": "RECV_ERR_PER_S",
      "unit": "seconds",
      "type": "gauge"
    },
    {
      "name": "hanadb_network_transmission_rate_errors_per",
      "description": "Network tramission rate of errors per seconds",
      "labels": ["HOST", "INTERFACE"],
      "value": "TRANS_ERR_PER_S",
      "unit": "seconds",
      "type": "gauge"
    }
  ],
  "SELECT host, LPAD(port,5) port, file_name, file_type, used_size/1024/1024 used_size_mb, total_size/1024/1024 total_size_mb, (total_size - used_size)/1024/1024 available_size_mb, LPAD(TO_DECIMAL(MAP(total_size, 0, 0, ( 1 - used_size / total_size ) * 100), 10, 2), 8) frag_pct FROM sys.m_volume_files WHERE file_type = 'DATA';":
  [
    {
      "name": "hanadb_disk_data_files_used_size",
      "description": "Used space per file and file type (in MB)",
      "labels": ["HOST", "PORT", "FILE_NAME", "FILE_TYPE"],
      "value": "USED_SIZE_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_data_files_total_size",
      "description": "Total space per file and file type (in MB)",
      "labels": ["HOST", "PORT", "FILE_NAME", "FILE_TYPE"],
      "value": "TOTAL_SIZE_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_data_files_available_size",
      "description": "Available space per file and file type (in MB)",
      "labels": ["HOST", "PORT", "FILE_NAME", "FILE_TYPE"],
      "value": "AVAILABLE_SIZE_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_data_files_fragmentation",
      "description": "Percentage of unused space compared to total space in file",
      "labels": ["HOST", "PORT", "FILE_NAME", "FILE_TYPE"],
      "value": "FRAG_PCT",
      "unit": "percent",
      "type": "gauge"
    }
  ],
  "SELECT md.host, md.usage_type, md.path, md.filesystem_type, TO_DECIMAL(md.total_device_size / 1024 / 1024, 10, 2) total_device_size_mb, TO_DECIMAL(md.total_size / 1024 / 1024, 10, 2) total_size_mb, TO_DECIMAL(md.used_size / 1024 / 1024, 10, 2) total_used_size_mb, TO_DECIMAL(du.used_size / 1024 / 1024, 10, 2) used_size_mb FROM sys.m_disk_usage du, sys.m_disks md WHERE du.host = md.host AND du.usage_type = md.usage_type;":
  [
    {
      "name": "hanadb_disk_total_device_size",
      "description": "Total device size returned by the operating system (in MB). It will be repeated if the device is shared between usages_types.",
      "labels": ["HOST", "USAGE_TYPE", "PATH", "FILESYSTEM_TYPE"],
      "value": "TOTAL_DEVICE_SIZE_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_total_size",
      "description": "Specifies the volume size in MB. It will be repeated if the volume is shared between usages_types.",
      "labels": ["HOST", "USAGE_TYPE", "PATH", "FILESYSTEM_TYPE"],
      "value": "TOTAL_SIZE_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_total_used_size",
      "description": "Specifies the used volume size in MB. It will be repeated if the volume is shared between usages_types.",
      "labels": ["HOST", "USAGE_TYPE", "PATH", "FILESYSTEM_TYPE"],
      "value": "TOTAL_USED_SIZE_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_used_size",
      "description": "Size of used disk space in MB based on usage_type",
      "labels": ["HOST", "USAGE_TYPE", "PATH", "FILESYSTEM_TYPE"],
      "value": "USED_SIZE_MB",
      "unit": "mb",
      "type": "gauge"
    }
  ],
  "SELECT host, disk, queue_length, srv_ms + wait_ms latency_ms, srv_ms, wait_ms, io_per_s, tp_kbps FROM( SELECT MAX(TIMESTAMP) timestamp, host,     measured_element_name disk, MAX(MAP(caption, 'Queue Length', TO_NUMBER(value), 0)) queue_length, MAX(MAP(caption, 'Service Time', TO_NUMBER(value), 0)) srv_ms, MAX(MAP(caption, 'Wait Time', TO_NUMBER(value), 0)) wait_ms, MAX(MAP(caption, 'I/O Rate', TO_NUMBER(value), 0)) io_per_s, MAX(MAP(caption, 'Total Throughput', TO_NUMBER(value), 0)) tp_kbps FROM sys.m_host_agent_metrics WHERE measured_element_type = 'Disk' GROUP BY host, measured_element_name);":
  [
    {
      "name": "hanadb_disk_io_queue_length",
      "description": "I/O queue length (average queue length of the requests that were issued to the Disk Device)",
      "labels": ["HOST", "DISK"],
      "value": "QUEUE_LENGTH",
      "unit": "requests",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_io_latency",
      "description": "Total I/O latency (ms), calculated from the sum of service and wait time",
      "labels": ["HOST", "DISK"],
      "value": "LATENCY_MS",
      "unit": "ms",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_io_service_time",
      "description": "I/O service time in ms",
      "labels": ["HOST", "DISK"],
      "value": "SRV_MS",
      "unit": "ms",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_io_wait_time",
      "description": "I/O service time in ms",
      "labels": ["HOST", "DISK"],
      "value": "WAIT_MS",
      "unit": "ms",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_io_requests_per",
      "description": "I/O requests per second",
      "labels": ["HOST", "DISK"],
      "value": "IO_PER_S",
      "unit": "second",
      "type": "gauge"
    },
    {
      "name": "hanadb_disk_io_throughput",
      "description": "I/O throughput in KB/seconds",
      "labels": ["HOST", "DISK"],
      "value": "TP_KBPS",
      "unit": "kb_second",
      "type": "gauge"
    }
  ],
  "SELECT m.host, LPAD(m.port, 5) port, m.service_name service, TO_DECIMAL(m.shared_memory_allocated_size / 1024 / 1024, 10, 2) shm_alloc_mb, TO_DECIMAL(m.shared_memory_used_size / 1024 / 1024, 10, 2) shm_used_mb, TO_DECIMAL(MAP(m.shared_memory_allocated_size, 0, 0, m.shared_memory_used_size / m.shared_memory_allocated_size * 100), 10, 2) shm_used_pct, TO_DECIMAL(m.heap_memory_allocated_size / 1024 / 1024, 10, 2) heap_alloc_mb, TO_DECIMAL(m.heap_memory_used_size / 1024 / 1024, 10, 2) heap_used_mb, TO_DECIMAL(MAP(m.heap_memory_allocated_size, 0, 0, m.heap_memory_used_size / m.heap_memory_allocated_size * 100), 10, 2) heap_used_pct, TO_DECIMAL(m.total_memory_used_size / 1024 / 1024, 10, 2) total_memory_used_mb, TO_DECIMAL(m.physical_memory_size / 1024 / 1024, 10, 2) total_phys_mem_mb, TO_DECIMAL(m.logical_memory_size / 1024 / 1024, 10, 2) total_logical_mem_mb, TO_DECIMAL(m.code_size / 1024 / 1024, 10, 2) code_size_mem_mb, TO_DECIMAL(m.stack_size / 1024 / 1024, 10, 2) stack_size_mem_mb, TO_DECIMAL(m.compactors_freeable_size / 1024 / 1024, 10, 2) compactors_freeable_size_mem_mb,   TO_DECIMAL(m.compactors_allocated_size / 1024 / 1024, 10, 2) compactors_allocated_size_mem_mb, TO_DECIMAL(m.allocation_limit / 1024 / 1024, 10, 2) process_alloc_limit_mb, TO_DECIMAL(m.effective_allocation_limit / 1024 / 1024, 10, 2) effective_proc_alloc_limit_mb FROM sys.m_service_memory m;":
  [
    {
      "name": "hanadb_memory_service_shared_allocated",
      "description": "Allocated Shared Memory part of the memory pool per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "SHM_ALLOC_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_shared_used",
      "description": "Used Shared Memory part of the memory pool per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "SHM_USED_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_shared_used",
      "description": "Percentage of used Shared Memory from the memory pool per service",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "SHM_USED_PCT",
      "unit": "percent",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_heap_allocated",
      "description": "Allocated Heap Memory part of the memory pool per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "HEAP_ALLOC_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_heap_used",
      "description": "Used Heap Memory part of the memory pool per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "HEAP_USED_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_heap_used",
      "description": "Percentage of used Heap Memory part of the memory pool per service",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "HEAP_USED_PCT",
      "unit": "percent",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_total_used",
      "description": "Total memory from the memory pool used per services in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "TOTAL_MEMORY_USED_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_physical_total",
      "description": "Total physical resident memory size (operating system perspective) per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "TOTAL_PHYS_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_virtual_total",
      "description": "Total Virtual memory size (operating system perspective) per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "TOTAL_LOGICAL_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_code_size",
      "description": "Code size, including shared libraries, per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "CODE_SIZE_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_stack_size",
      "description": "Stack size per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "STACK_SIZE_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_compactors_freeable_size",
      "description": "Memory that can be freed during a memory shortage per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "COMPACTORS_FREEABLE_SIZE_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_compactors_allocated_size",
      "description": "Part of the memory pool that can potentially (if unpinned) be freed during a memory shortage per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "COMPACTORS_ALLOCATED_SIZE_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_alloc_limit",
      "description": "Maximum memory pool size (configurable value) per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "PROCESS_ALLOC_LIMIT_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_memory_service_effective_alloc_limit",
      "description": "Effective maximum memory pool size, considering the pool sizes of other processes (computed value) per service in MB",
      "labels": ["HOST", "PORT", "SERVICE"],
      "value": "PROCESS_ALLOC_LIMIT_MB",
      "unit": "mb",
      "type": "gauge"
    }
  ],
  "SELECT host, ROUND((used_physical_memory + free_physical_memory) / 1024 / 1024, 2) host_physical_mem_mb, ROUND(used_physical_memory / 1024 / 1024, 2) host_resident_mem_mb, ROUND(free_physical_memory / 1024 / 1024, 2) host_free_physical_mem_mb, ROUND(free_swap_space / 1024 / 1024, 2) host_free_swap_mb, ROUND(used_swap_space / 1024 / 1024, 2) host_used_swap_mb, ROUND(allocation_limit / 1024 / 1024, 2) host_alloc_limit_mb, ROUND(instance_total_memory_used_size / 1024 / 1024, 2) host_total_used_mem_mb, ROUND(instance_total_memory_peak_used_size / 1024 / 1024, 2) host_total_peak_used_mem_mb, ROUND(instance_total_memory_allocated_size / 1024 / 1024, 2) host_total_alloc_mem_mb, ROUND(instance_code_size / 1024 / 1024, 2) host_code_size_mb, ROUND(instance_shared_memory_allocated_size / 1024 / 1024, 2) host_shr_mem_alloc_mb FROM sys.m_host_resource_utilization;":
  [
    {
      "name": "hanadb_host_memory_physical_total",
      "description": "Total physical memory per host in MB",
      "labels": ["HOST"],
      "value": "HOST_PHYSICAL_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_resident",
      "description": "Total resident (used physical) memory per host in MB",
      "labels": ["HOST"],
      "value": "HOST_RESIDENT_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_physical_free",
      "description": "Free physical memory per host in MB",
      "labels": ["HOST"],
      "value": "HOST_FREE_PHYSICAL_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_swap_free",
      "description": "Free swap memory per host in MB",
      "labels": ["HOST"],
      "value": "HOST_FREE_SWAP_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_swap_used",
      "description": "Used swap memory per host in MB",
      "labels": ["HOST"],
      "value": "HOST_USED_SWAP_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_alloc_limit",
      "description": "Memory allocation limit for all process per host in MB",
      "labels": ["HOST"],
      "value": "HOST_ALLOC_LIMIT_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_used_total",
      "description": "Amount of memory from the memory pool that is currently being used by SAP HANA processes per host in MB",
      "labels": ["HOST"],
      "value": "HOST_TOTAL_USED_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_used_peak",
      "description": "Peak memory from the memory pool used by SAP HANA processes since the instance started (this is a sample-based value) per host in MB",
      "labels": ["HOST"],
      "value": "HOST_TOTAL_PEAK_USED_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_pool_size",
      "description": "Size of the memory pool for all SAP HANA processes per host in MB",
      "labels": ["HOST"],
      "value": "HOST_TOTAL_ALLOC_MEM_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_code_size",
      "description": "Code size, including shared libraries of SAP HANA processes per host in MB",
      "labels": ["HOST"],
      "value": "HOST_CODE_SIZE_MB",
      "unit": "mb",
      "type": "gauge"
    },
    {
      "name": "hanadb_host_memory_shared_alloc",
      "description": "Shared memory size of SAP HANA processes per host in MB",
      "labels": ["HOST"],
      "value": "HOST_SHR_MEM_ALLOC_MB",
      "unit": "mb",
      "type": "gauge"
    }
  ]
}
